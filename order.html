<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Essensbestellung Spielersitzung</title>
    <link rel="icon" href="favicon.png" type="image/png">
    
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>
    
    <script src="firebase-config.js"></script>

    <style>
    :root {
        --primary-color: #1A237E;
        --background-color: #F8F9FA;
        --container-bg-color: rgba(255, 255, 255, 0.9);
        --text-color: #333;
        --button-color: #1A237E;
        --button-hover-color: #283593;
        --input-border-color: #ccc;
    }
    body {
        font-family: sans-serif;
        background-color: var(--background-color);
        color: var(--text-color);
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
        box-sizing: border-box;
        line-height: 1.6;

        background-image: url('background.png');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
    }
    .logo {
        width: 100%;
        max-width: 400px;
        display: block;
        margin: 0 auto 20px;
    }
    h1 {
        color: white; /* Farbe auf Weiß geändert */
        text-align: center;
    }
    .container-form {
        background-color: var(--container-bg-color);
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        margin-top: 20px;
    }
    label, input, select, textarea {
        display: block;
        width: 100%;
        margin-bottom: 15px;
        box-sizing: border-box;
        font-size: 16px;
    }
    input, select, textarea {
        padding: 12px;
        border: 1px solid var(--input-border-color);
        border-radius: 8px;
        transition: border-color 0.3s ease;
    }
    input:focus, select:focus, textarea:focus {
        outline: none;
        border-color: var(--primary-color);
    }
    .app-button {
        display: block;
        width: 100%;
        padding: 15px;
        background-color: var(--button-color);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        text-decoration: none;
        text-align: center;
        font-size: 18px;
        font-weight: bold;
        transition: background-color 0.3s ease, transform 0.1s ease;
    }
    .app-button:hover {
        background-color: var(--button-hover-color);
        transform: translateY(-2px);
    }
    .app-button:active {
        transform: translateY(0);
    }
    .button-container {
        display: flex;
        justify-content: space-between;
        gap: 15px;
        margin-top: 10px;
    }
    .button-container .app-button {
        flex: 1;
        padding: 10px;
        white-space: nowrap;
    }
    .link-button, .home-button {
        text-decoration: none;
    }
    .imprint-text {
        text-align: center;
        font-size: 12px;
        margin-top: 40px;
        color: #666;
    }
    .imprint-text a {
        color: #666;
        text-decoration: none;
        transition: color 0.3s ease;
    }
    .imprint-text a:hover {
        color: #999;
        text-decoration: underline;
    }
</style>
</head>
<body>

    <img src="head.png" alt="Logo TVW" class="logo">

    <div class="button-container">
        <a href="index.html" class="link-button"><button class="app-button">Startseite</button></a>
        <a href="uebersicht.html" class="link-button"><button class="app-button">Bestellübersicht</button></a>
    </div>

    <h1>Essensbestellung aufgeben</h1>

    <form id="bestellformular" class="container-form">
        <label for="name">Dein Name:</label>
        <input type="text" id="name" required>
        
        <label for="gericht">Dein Gericht:</label>
        <select id="gericht" required>
            <option value="">Wähle ein Gericht</option>
            <option value="Gyros mit Pommes und Reis 14,50 EUR">Nr. 50) Gyros mit Pommes und Reis 14,50 EUR</option>
            <option value="Souvlaki mit Pommes und Reis 14,90 EUR">Nr. 53) Souvlaki mit Pommes und Reis 14,90 EUR</option>
            <option value="Schnitzel Wiener Art mit Pommes 13,90 EUR">Nr. 60) Schnitzel Wiener Art mit Pommes 13,90 EUR</option>
            <option value="Kotopoulo Hähnchenfilet mit Pommes und Reis 15,50 EUR">Nr. 56) Kotopoulo Hähnchenfilet mit Pommes und Reis 15,50 EUR</option>
            <option value="Gyros Spezial mit Metaxa Sauce und Käse überbacken 16,90 EUR">Nr. 70) Gyros Spezial mit Metaxa Sauce und Käse überbacken 16,90 EUR</option>
            <option value="Kalamari paniert und frittiert, mit Reis 16,90 EUR">Nr. 81) Kalamari paniert und frittiert, mit Reis 16,90 EUR</option>
            <option value="Choriatiki Bauernsalat mit Tomaten und Gurken 10,90 EUR">Nr. 30) Choriatiki Bauernsalat mit Tomaten und Gurken 10,90 EUR</option>
            <option value="Thunfisch Salat 11,50 EUR">Nr. 8) Thunfisch Salat 11,50 EUR</option>
            <option value="Pommes 3,50 EUR">Nr. 35) Pommes 3,50 EUR</option>
        </select>
        
        <label for="sonderwuensche">Sonderwünsche oder Anmerkungen zum Gericht:</label>
        <textarea id="sonderwuensche"></textarea>
        
        <button type="submit" class="app-button">Bestellung abschicken</button>
    </form>
    
    <div class="imprint-text">
        <p>
            <a href="impressum.html">Impressum</a> | <a href="datenschutz.html">Datenschutz</a>
        </p>
    </div>

    <script>
        const bestellformular = document.getElementById("bestellformular");
        const nameInput = document.getElementById("name");
        const gerichtInput = document.getElementById("gericht");
        const sonderwuenscheInput = document.getElementById("sonderwuensche");

        let userUid = null;

        bestellformular.addEventListener("submit", (e) => {
            e.preventDefault();

            const name = nameInput.value;
            const gericht = gerichtInput.value;
            const sonderwuensche = sonderwuenscheInput.value;

            db.collection("bestellungen").add({
                userId: userUid,
                name: name,
                gericht: gericht,
                sonderwuensche: sonderwuensche,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => {
                alert("Bestellung erfolgreich gespeichert!");
                bestellformular.reset();
            })
            .catch((error) => {
                console.error("Fehler beim Speichern der Bestellung: ", error);
                alert("Fehler beim Speichern der Bestellung.");
            });
        });

        auth.signInAnonymously().then((userCredential) => {
            userUid = userCredential.user.uid;
            console.log("Benutzer-ID:", userUid);
        }).catch((error) => {
            console.error("Fehler bei der anonymen Anmeldung:", error);
        });
    </script>
</body>
</html>